(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=t(14),l=t(2),i=(t(20),function(e){var n=e.handleDelete,t=e.id,a=e.name;return r.a.createElement("div",{style:{display:"inline-block",padding:"5px"}},r.a.createElement("button",{onClick:function(){return n(t,a)}},"delete"))}),s=function(e){var n=e.searchResults,t=e.handleDelete;return n.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number," ",r.a.createElement(i,{id:e.id,handleDelete:t,name:e.name}))}))},m=function(e){var n=e.newSearch,t=e.handleSearchChange;return r.a.createElement("div",null,"Search the phonebook:"," ",r.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.addPerson,t=e.newName,a=e.newNumber,c=e.handleNameChange,u=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:c,required:!0})),r.a.createElement("div",null,"number:",r.a.createElement("input",{type:"tel",placeholder:"040-123-4567",value:a,onChange:u,required:!0})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},h=function(e){var n=e.message,t=e.messageType;return null===n?null:r.a.createElement("div",{className:"failure"===t?"error":"success"},n)},f=t(3),b=t.n(f),p=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),f=i[0],p=i[1],v=Object(a.useState)(""),E=Object(l.a)(v,2),g=E[0],w=E[1],j=Object(a.useState)(""),O=Object(l.a)(j,2),C=O[0],S=O[1],k=Object(a.useState)(!0),y=Object(l.a)(k,2),N=y[0],L=y[1],D=Object(a.useState)(null),T=Object(l.a)(D,2),P=T[0],q=T[1],x=Object(a.useState)(null),J=Object(l.a)(x,2),R=J[0],A=J[1];Object(a.useEffect)((function(){b.a.get("/api/persons").then((function(e){return e.data})).then((function(e){c(e)}))}),[]);var B=N?t:t.filter((function(e){var n=e.name.toLocaleLowerCase(),t=C.toLowerCase();return n.includes(t)}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(h,{message:P,messageType:R}),r.a.createElement(m,{newSearch:C,handleSearchChange:function(e){S(e.target.value),L(!1)}}),r.a.createElement("h3",null,"Add a new listing"),r.a.createElement(d,{addPerson:function(e){e.preventDefault();var n,a={name:f,number:g},r=t.find((function(e){return e.name.toLocaleLowerCase()===f.toLocaleLowerCase()})),u=Object(o.a)({},r,{number:g});r?(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?")),function(e,n){var t="/api/persons/".concat(e);return b.a.put(t,n).then((function(e){return e.data}))}(r.id,u).then((function(e){c(t.map((function(n){return n.id!==r.id?n:e}))),A("success"),q("".concat(r.name,"'s number was successfully updated in the phonebook.")),setTimeout((function(){q(null)}),5e3),p(""),w("")})).catch((function(e){A("failure"),q("".concat(r.name," cannot be found on the server.")),setTimeout((function(){q(null)}),5e3)}))):(n=a,b.a.post("/api/persons",n).then((function(e){return e.data}))).then((function(e){c(t.concat(e)),p(""),w(""),A("success"),q("".concat(a.name," was successfully added to the phonebook.")),setTimeout((function(){q(null)}),5e3)})).catch((function(e){console.log(e.response.data),A("failure"),q(e.response.data.error),setTimeout((function(){q(null)}),5e3)}))},newName:f,handleNameChange:function(e){return p(e.target.value)},newNumber:g,handleNumberChange:function(e){return w(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(s,{searchResults:B,handleDelete:function(e,n){window.confirm("Delete ".concat(n,"?"))&&(!function(e){var n="/api/persons/".concat(e);b.a.delete(n).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}(e),c(t.filter((function(n){return n.id!==e}))))}}))};u.a.render(r.a.createElement(p,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.9f26ae2d.chunk.js.map