{"version":3,"sources":["components/DeleteButton.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","App.js","services/persons.js","index.js"],"names":["DeleteButton","handleDelete","id","name","style","display","padding","onClick","Persons","searchResults","map","person","key","number","Filter","newSearch","handleSearchChange","value","onChange","PersonForm","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","required","type","placeholder","Notification","message","messageType","className","App","useState","persons","setPersons","setNewName","setNewNumber","setNewSearch","showAll","setShowAll","errorMessage","setErrorMessage","setMessageType","useEffect","axios","get","then","response","data","initialPersons","filter","filteredName","toLocaleLowerCase","searchName","toLowerCase","includes","event","target","preventDefault","obj","filteredPerson","find","changedNumber","window","confirm","newObject","baseURL","put","update","returnedPerson","setTimeout","catch","error","post","concat","delete","console","log","deleteObj","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c74a3183.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst DeleteButton = ({ handleDelete, id, name }) => {\r\n  return (\r\n    <div style={{ display: \"inline-block\", padding: \"5px\" }}>\r\n      <button onClick={() => handleDelete(id, name)}>delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteButton;\r\n","import React from \"react\";\r\nimport DeleteButton from \"./DeleteButton\";\r\n\r\nconst Persons = ({ searchResults, handleDelete }) => {\r\n  return searchResults.map(person => {\r\n    return (\r\n      <div key={person.name}>\r\n        {person.name} {person.number}{\" \"}\r\n        <DeleteButton\r\n          id={person.id}\r\n          handleDelete={handleDelete}\r\n          name={person.name}\r\n        />\r\n      </div>\r\n    );\r\n  });\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ newSearch, handleSearchChange }) => {\r\n  return (\r\n    <div>\r\n      Search the phonebook:{\" \"}\r\n      <input value={newSearch} onChange={handleSearchChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handleNumberChange\r\n}) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} required />\r\n        </div>\r\n        <div>\r\n          number:\r\n          <input\r\n            type=\"tel\"\r\n            // pattern=\"[0-9]{3}-[0-9]{3}-[0-9]{4}\"\r\n            placeholder=\"040-123-4567\"\r\n            value={newNumber}\r\n            onChange={handleNumberChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, messageType }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={messageType === \"failure\" ? \"error\" : \"success\"}>\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\n\nimport \"./index.css\";\n\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Notification from \"./components/Notification\";\n\nimport { getAll, create, deleteObj, update } from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [showAll, setShowAll] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [messageType, setMessageType] = useState(null);\n\n  useEffect(() => {\n    getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPerson = event => {\n    event.preventDefault();\n    const addPerson = { name: newName, number: newNumber };\n    const filteredPerson = persons.find(\n      person => person.name.toLocaleLowerCase() === newName.toLocaleLowerCase()\n    );\n\n    const changedNumber = { ...filteredPerson, number: newNumber };\n\n    if (filteredPerson) {\n      window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      update(filteredPerson.id, changedNumber)\n        .then(returnedPerson => {\n          setPersons(\n            persons.map(person =>\n              person.id !== filteredPerson.id ? person : returnedPerson\n            )\n          );\n          setMessageType(\"success\");\n\n          setErrorMessage(\n            `${filteredPerson.name}'s number was successfully updated in the phonebook.`\n          );\n\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n        .catch(error => {\n          setMessageType(\"failure\");\n          setErrorMessage(\n            `${filteredPerson.name} cannot be found on the server.`\n          );\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    } else {\n      create(addPerson)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setMessageType(\"success\");\n          setErrorMessage(\n            `${addPerson.name} was successfully added to the phonebook.`\n          );\n\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        })\n        .catch(error => {\n          // console.log(error.response.data);\n          setMessageType(\"failure\");\n          setErrorMessage(error.response.data.error);\n\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = event => setNewName(event.target.value);\n\n  const handleNumberChange = event => setNewNumber(event.target.value);\n\n  const handleSearchChange = event => {\n    setNewSearch(event.target.value);\n    setShowAll(false);\n  };\n\n  const handleDelete = (id, name) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      deleteObj(id);\n      setPersons(persons.filter(person => person.id !== id));\n    }\n  };\n\n  const searchResults = showAll\n    ? persons\n    : persons.filter(person => {\n        let filteredName = person.name.toLocaleLowerCase();\n        let searchName = newSearch.toLowerCase();\n        return filteredName.includes(searchName);\n      });\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} messageType={messageType} />\n      <Filter newSearch={newSearch} handleSearchChange={handleSearchChange} />\n      <h3>Add a new listing</h3>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h3>Numbers</h3>\n      <Persons searchResults={searchResults} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import axios from \"axios\";\r\nconst baseURL = \"/api/persons\";\r\n\r\nexport const getAll = () => {\r\n  const request = axios.get(baseURL);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport const create = obj => {\r\n  const request = axios.post(baseURL, obj);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport const deleteObj = id => {\r\n  const baseURL = `/api/persons/${id}`;\r\n  const request = axios.delete(baseURL);\r\n  return request\r\n    .then(response => response.data)\r\n    .catch(error => console.log(error));\r\n};\r\n\r\nexport const update = (id, newObject) => {\r\n  const baseURL = `/api/persons/${id}`;\r\n  const request = axios.put(baseURL, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}